<!DOCTYPE html>
<html ng-app>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>Exercise Science Toolkit</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js"></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
    <script src='https://d3js.org/d3.v3.min.js'></script>
    <script src="chart.min.js"></script>
    <script src="frame.js"></script>
    <link rel="stylesheet" type="text/css" href="http://115.112.118.252/VirtualEST//assets/css/health.css" />
    <link rel="stylesheet" type="text/css" href="http://115.112.118.252/VirtualEST//assets/css/style.css" />
    
    <!-- Reference to MAOD module's .css -->
    <link rel="stylesheet" type="text/css" href="graph.css" />
</head>

<body>
    <div class="header">
        <div class="wrapper">
            <div class="head_left">Exercise Science Toolkit</div>
            <div id="patientname" class="head_right">Patient Name: {{yourName}}<input name="submitMedical" value="" title="edit client details" class="profile_edit_btn" type="submit" /></div>
        </div>
    </div>

    <div class="orng_container green_container">
        <div class="wrapper">
            <div class="orng_box_btn f_left">
                <a href="#" id="exit"><img src="http://115.112.118.252/VirtualEST//assets/images/back_green.jpg"></a>
            </div>
            
            <!-- Page title for MAOD module -->
            <div class="orng_box_head f_left">
                <h3>Fitness Testing</h3>
                <p id="title">Anaerobic capacity / MAOD (screen 1)</p>
            </div>

            <div class="orng_box_btn f_right">
                <a href="#" onclick="window.print(); return false;"><img src="http://115.112.118.252/VirtualEST//assets/images/print_green.jpg"></a>
            </div>

            <div class="orng_box_btn f_right">
                <a href="#" class="info_icon_btn"><img src="http://115.112.118.252/VirtualEST//assets/images/info_green.jpg"></a>
            </div>

            <div class="orng_box_btn f_right">
                <form name="vpform" id="vpvirticaljumpgen" method="post">
                    <a href="#" class="vitual_btn"><img src="http://115.112.118.252/VirtualEST//assets/images/virtual_icon.png" style="margin-top: 12px;"></a>
                    <input type="hidden" name="vptype" value="vjump_vp">
                </form>
            </div>

            <div class="vitual_div"></div>
            <div class="overlay">&nbsp;</div>

            <!-- Information for MAOD module, same across both screens -->
            <div class="info_block">
                <div class="info_block_head">Maximal Accumulated Oxygen Deficit (MAOD)</div>
                <p>
                    A method of estimating the maximal anaerobic capacity is to use the method proposed by Medbø and colleagues in the 1980’s.The method is known as the oxygen deficit method. The maximal accumulated oxygen deficit [MAOD] is defined as the difference between the energy-demand of an exhausting bout of supramaximal exercise [usually expressed as an oxygen equivalent] and the oxygen uptake during the exercise. The Medbø MAOD method involves the following steps:
                </p>
                <br />
                <p>
                    [1] a regression equation between measured oxygen uptake and power output [workrate] is established from a number of sub-anaerobic threshold work rates. This is done by having the athlete work at a number of steady-state submaximal workrates, and generating a line of best fit to the data. The users needs to enter the work stages [in km per hour or power output in Watts in the appropriate fields] and then click ‘plot’. The regression between work rate [speed or power] and VO2 is established on screen one of the MAOD test. The energy demand is in oxygen equivalents and can be determined for any level of external work, for example, running speed or power on a bike using the regression equation established [and assuming a linear relationship even up to supramaximal intensity levels].
                </p>
                <br />
                <p>
                    [2] the subject then undergoes exercise to exhaustion at a supramaximal workrate, usually ~110 -125% of VO2max. The regression line established on screen one is used automatically to predict the energy demand of exercise [in oxygen-equivalents] at the chosen supramaximal workrate. The supramaximal exercise intensity should be estimated to result in exhaustion within about 70 – 180 seconds. During the supramaximal exercise VO2 is measured in intervals of between 10 – 30 s [preferably 10 s]. The measured VO2 values are entered on screen two of the MAOD test. The oxygen deficit is then determined as the total oxygen demand less the total measured oxygen uptake. It is reported as mL O2 equivalents / kg body mass. Typical values are also displayed and are based on published sex-specific norms.
                </p>
                <div class="info_block_foot">
                    <a href="#" class="lite_btn grey_btn f_right close">Close</a>
                </div>
            </div>

        </div>
    </div>

    <div class="wrapper">

        <!-- Form begins -->
        <form action="http://115.112.118.252/VirtualEST/index.php/Fitness/saveClientVerticalJumpInfo" method="post" accept-charset="utf-8" id="myform" name="myform">
            <div style="display:none">
                <input name="userid" value="1903" type="hidden" />
            </div>

            <div class="contain">
                <div class="side_menu" style="height: 1275px; min-height: 1275px;">
                    <a href="#" class="menu_btn"></a>
                    <div class="drop_main" style="position: absolute; top:0; display:none;">
                        <ul>
                            <li>
                                <a href="#" id="anaerobic_strength"><img> Anaerobic strength and power</a>
                                <ul class="sub_menu">
                                    <li><a href="http://115.112.118.252/VirtualEST/index.php/Fitness/vertical_jump">vertical jump</a></li>
                                    <li><a href="http://115.112.118.252/VirtualEST/index.php/Fitness/flight_time">flight:contact time</a></li>
                                    <li><a href="http://115.112.118.252/VirtualEST/index.php/Fitness/peak_power">peak power [W]</a></li>
                                    <li><a href="http://115.112.118.252/VirtualEST/index.php/Fitness/strength">strength tests</a></li>

                                </ul>
                            </li>

                            <li>
                                <a href="#" id="anaerobic_capacity"><img> Anaerobic capacity</a>
                                <ul class="sub_menu">
                                    <li><a href="http://115.112.118.252/VirtualEST/index.php/Fitness/total_work_done_30s">30 s total work [kJ]</a></li>
                                    <li><a>maximal accumulated oxygen deficit (MAOD)</a></li>
                                </ul>
                            </li>

                            <li>
                                <a href="#" id="aerobic_fitness"><img> Aerobic fitness</a>
                                <ul class="sub_menu">
                                    <li>
                                        <a href="#" id="VO2max">VO<sub>2max</sub> [mL/kg/min]</a>
                                        <ul class="inner_sub_menu">
                                            <li><a href="http://115.112.118.252/VirtualEST/index.php/Fitness/submaximal_test">submaximal tests</a></li>
                                            <li><a href="http://115.112.118.252/VirtualEST/index.php/Fitness/shuttle_test">20 m shuttle test</a></li>
                                            <li><a href="http://115.112.118.252/VirtualEST/index.php/Fitness/v02max_test">measured VO<sub>2max</sub></a></li>
                                        </ul>
                                    </li>
                                    <li><a href="http://115.112.118.252/VirtualEST/index.php/Fitness/lactate_threshold">lactate threshold</a></li>
                                    <li><a href="http://115.112.118.252/VirtualEST/index.php/Fitness/maod">maod test</a></li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!--Start right, Screen 1 -->
            <div id="screen1" style="display: inline" class="right-section right-section_new">
                <div class="right-head">Maximal Accumulated Oxygen Deficit (MAOD)</div>
                <div id="input-vals">
                    
                    <!-- Inputs for Bodymass, Name, and Sex -->
                    <label for="bodymass"><strong>Body Mass (kg)</strong></label>
                    <label for="name" style="margin-left: 180px"><strong>Name</strong></label>
                    <label for="" style="margin-left: 225px;"><strong>Sex</strong></label>
                    <br />
                    <br />
                    <input type="text" id="bodymass" style="width: 190px;" tabindex=1 maxlength=6 required autofocus oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" />
                    <input type="text" id="name" style="width: 190px; margin-left: 30px; margin-right: 20px;" tabindex=2 ng-model="yourName" />

                    <div style="display: inline;">
                        <input type="radio" style="display: none;" id="male" name="sex" value="male"><label for="male"><span style="float: none; margin-right: 8px;"></span><strong>Male</strong></label>
                        <input type="radio" style="display: none;" id="female" name="sex" value="female"><label for="female"><span style="float: none; margin-right: 8px; margin-left: 5px;"></span><strong>Female</strong></label>
                    </div>

                </div>

                <br>
                
                <!-- Input table for Workload and VO2max data pairs, plotted in firstGraph -->
                <div class="field_row" style="border-bottom: none">
                    <ul class="field_24" id="workload" style="position: absolute; margin-top: 10px;">
                        <label style="margin-bottom: 0; padding-bottom: 21px; text-align: center"><strong>Workload</strong></label>

                        <li><input class="x" type="text" tabindex=2 oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li><input class="x" type="text" tabindex=4 oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li><input class="x" type="text" tabindex=6 oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li><input class="x" type="text" tabindex=8 oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li><input class="x" type="text" tabindex=10 oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li><input class="x" type="text" tabindex=12 oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li><input class="x" type="text" tabindex=14 oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li><input class="x" type="text" tabindex=16 oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li><input class="x" type="text" tabindex=18 oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li><input class="x" type="text" tabindex=20 oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li><input class="x" type="text" tabindex=22 oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li><input class="x" type="text" tabindex=24 oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li></li>
                        <li><input type="radio" style="display: none" name="workloadUnits" id="power" value="power"><label for="power" style="margin-top: 10px;"><span style="float: none; margin-right: 8px;"></span><strong>Watts</strong></label></li>
                        <li><input type="radio" style="display: none" name="workloadUnits" id="speed" value="speed"><label for="speed"><span style="float: none; margin-right: 8px;"></span><strong>kph</strong></label></li>
                    </ul>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <ul id="vo2" class="field_24" style="position: absolute; margin-left: 80px; margin-top: 10px;">
                        <label style="margin: 0; padding: 0; text-align: center">
                            <strong>
                                VO<sub>2max</sub><br />
                                (L/min)
                            </strong>
                        </label>
                        <li><input class="y" type="text" tabindex=3 oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li><input class="y" type="text" tabindex=5 oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li><input class="y" type="text" tabindex=7 oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li><input class="y" type="text" tabindex=9 oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li><input class="y" type="text" tabindex=11 oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li><input class="y" type="text" tabindex=13 oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li><input class="y" type="text" tabindex=15 oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li><input class="y" type="text" tabindex=17 oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li><input class="y" type="text" tabindex=19 oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li><input class="y" type="text" tabindex=21 oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li><input class="y" type="text" tabindex=23 oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li><input class="y" type="text" tabindex=25 oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                    </ul>

                    <!-- SVG graph element using D3 to create and plot graph, and axis labels -->
                    <div id="results" style="text-align: center; margin-right: 130px; margin-top: -20px; opacity: 0.0"><strong><div style="margin-left: -73px;">Y = </div></strong><div style="margin-left: -120px;"><strong>R&sup2;= </strong></div></div>
                    <p id="yAxisLabel" class="axis text" style="position: absolute; margin-left: 210px; margin-top: 330px; transform: rotate(270deg);"></p>
                    <svg id="graphS1" width="700" height="700" style="margin-left: 250px; margin-top: -%5;"></svg>
                    <p id="xAxisLabel" class="axis text" style="text-align: center; margin-left: 345px; opacity: 0.0;">Workload (Kph)</p>
                    <br />  
                    
                    <!-- Navigation buttons for plotting graph, clearing data, and moving to next screen -->
                    <input class="lite_btn btn_white screen1-buttons" onclick="s1Input()" name="plot" value="Plot" type="button" style="position: absolute; margin-top: 40px; margin-left: 0px; width: 40px" />
                    <input class="lite_btn btn_white screen1-buttons" onclick="clearGraph('graphS1', true)" id="clearbtn" name="clear" value="Clear" type="button" style="position: absolute; margin-top: 40px; margin-left: 350px; width: 45px; visibility: hidden;" />
                    <input class="lite_btn btn_gray screen1-buttons" id="nxtbtn" name="move" onclick="changeScreens()" value="Next Screen" type="button" style="position: absolute; margin-top: 40px; margin-left: 738px; width: 140px; visibility: hidden;" />

                </div>
            </div>
            <div><br /></div>
            
            <!-- Screen 2 -->
            <div id="screen2" name="screen2" style="display: none" class="right-section right-section_new">
                <div class="right-head">Maximal Accumulated Oxygen Deficit (MAOD)</div>
                
                <!-- Input values for Time Intervals (drop-down list), Estimated VO2max, and Supramaximal Workrate -->
                <div id="input-vals">

                    <div style="display: inline">
                        <label for="value"><strong>Time interval (s)</strong></label>
                        <label for="Vmax" style="margin-left: 48px"><strong>Estimated V0<sub>2max</sub> (L/min)</strong></label>
                        <label for="supramaximal" style="margin-left: 48px"><strong>Supramaximal Workrate (%max)</strong></label>
                        <label for="tints" style="margin-left: 45px" id="reqWUnits"><p id=""></p></label>
                    </div>

                    <br />
                    <br />
                    <select name="tints" id="tints" style="width: 110px; float: left;" onkeypress="adjIntervalTable(this)" onkeydown="adjIntervalTable(this)" onChange="adjIntervalTable(this)">
                        <option value="5">5</option>
                        <option value="10">10</option>
                        <option value="15">15</option>
                        <option value="20">20</option>
                        <option value="30">30</option>
                        <option value="45">45</option>
                        <option value="60">60</option>
                    </select>
                    <input type="text" id="timeInterval" required style="width: 40px; visibility: hidden; display: none;" maxlength="3" onkeypress="adjIntervalTable(this)" onkeydown="adjIntervalTable(this)" onChange="adjIntervalTable(this)" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" />


                    <input type="text" id="Vmax" style="width: 110px; margin-left: 43px" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" onkeypress="reqSpeed()" onkeydown="reqSpeed()" onChange="reqSpeed()"/>
                    <input type="text" id="supramaximal" style="width: 150px; margin-left: 40px;" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" onkeypress="reqSpeed()" onkeydown="reqSpeed()" onChange="reqSpeed()" />
                    <input type="text" disabled id="reqworkload" style="width: 150px; display: inline-block; margin-left: 42px;" />

                </div>

                <br />

                <!-- Input table for VO2max, plotted in secondGraph -->
                <div class="field_row" style="border-bottom: none;">
                    <ul class="field_24" id="interval" style="position: absolute; padding-bottom: 10px; margin-top: 20px;">
                        <label style="margin: 0; padding: 0; text-align: center;"><strong>Interval</strong></label>
                        <label style="margin: 0; padding: 0; text-align: center;"><strong>(s)</strong></label>
                        <li><input disabled class="x2" value="10" /></li>
                        <li><input disabled class="x2" value="20" /></li>
                        <li><input disabled class="x2" value="30" /></li>
                        <li><input disabled class="x2" value="40" /></li>
                        <li><input disabled class="x2" value="50" /></li>
                        <li><input disabled class="x2" value="60" /></li>
                        <li><input disabled class="x2" value="70" /></li>
                        <li><input disabled class="x2" value="80" /></li>
                        <li><input disabled class="x2" value="90" /></li>
                        <li><input disabled class="x2" value="100" /></li>
                        <li><input disabled class="x2" value="110" /></li>
                        <li><input disabled class="x2" value="120" /></li>
                        <li><input disabled class="x2" value="130" /></li>
                        <li><input disabled class="x2" value="140" /></li>
                        <li><input disabled class="x2" value="150" /></li>
                        <li><input disabled class="x2" value="160" /></li>
                        <li><input disabled class="x2" value="170" /></li>
                        <li><input disabled class="x2" value="180" /></li>
                    </ul>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <ul id="vo2" class="field_24" style="position: absolute; margin-left: 80px; padding-bottom: 10px; margin-top: 20px;">
                        <label style="margin: 0; padding: 0; text-align: center;"><strong>V0<sub>2max</sub></strong></label>
                        <label style="margin: 0; padding: 0; text-align: center;"><strong>(L/min)</strong></label>
                        <li><input class="y2" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li><input class="y2" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li><input class="y2" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li><input class="y2" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li><input class="y2" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li><input class="y2" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li><input class="y2" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li><input class="y2" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li><input class="y2" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li><input class="y2" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li><input class="y2" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li><input class="y2" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li><input class="y2" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li><input class="y2" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li><input class="y2" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li><input class="y2" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li><input class="y2" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                        <li><input class="y2" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" /></li>
                    </ul>

                    <!-- SVG graph element using D3 to create and plot graph, and axis labels -->                    
                    <div id="results2" style="text-align: center; background-color: #c5efdb; margin-left: 300px; margin-top: -30px; margin-right: -35px; padding: 20px; opacity: 0.0; font-size: 25px;">Result</div>
                    <div id="percent" style="position: absolute; text-align: center; margin-left: 968px; margin-top: -40px; font-size: 25px; opacity: 0.0;">99.9%</div>

                    <p id="yAxisLabel3" class="text" style="position: absolute; margin-left: 910px; margin-top: 340px; transform: rotate(270deg);"></p>
                    <svg id="graphS3" width="200" height="700" style="position: absolute; margin-left: 900px;"></svg>

                    <p id="yAxisLabel2" class="text" style="position: absolute; margin-left: 200px; margin-top: 340px; transform: rotate(270deg);"></p>
                    <svg id="graphS2" width="700" height="700" style="position: relative; margin-left: 250px; "></svg>
                    <p id="xAxisLabel2" class="axis text" style="text-align: center; margin-left: 345px; padding-bottom: 220px; opacity: 0.0;">Graph</p>
                </div>
                
                <!-- Navigation buttons for plotting graph, clearing data, and moving to previous screen -->
                <div style="position: relative;">
                    <input class="lite_btn btn_white" onclick="s2Input()" name="plot" value="Plot" type="button" style="position: absolute; width: 40px;" />
                    <input class="lite_btn btn_white" onclick="clearGraph('graphS2', true)" name="clear" value="Clear" type="button" style="position: absolute; margin-left: 350px;   width: 45px" />
                    <input class="lite_btn btn_white" id="move" name="move" onclick="changeScreens()" value="Next Screen" type="button" style="position: absolute; margin-left: 738px; width: 160px;" />
                </div>
            </div>

        </form>
        <div><br /></div>
    </div>
</body>
</html>
